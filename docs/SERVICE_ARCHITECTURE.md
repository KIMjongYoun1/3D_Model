# ğŸ—ï¸ ì„œë¹„ìŠ¤ ê¸°ëŠ¥ ì¤‘ì‹¬ ì•„í‚¤í…ì²˜

> **ë²„ì „**: v1.0  
> **ìµœì¢… ìˆ˜ì •**: 2025.12.06  
> **ì„¤ê³„ ë°©í–¥**: ëª¨ë¸ë§ ì¤‘ì‹¬ â†’ ì„œë¹„ìŠ¤ ê¸°ëŠ¥ ì¤‘ì‹¬

---

## ğŸ“ ì „ì²´ ì„œë¹„ìŠ¤ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              í´ë¼ì´ì–¸íŠ¸ (Frontend)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                         Next.js (React)                               â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚   Auth       â”‚  â”‚   Try-On    â”‚  â”‚  Payment    â”‚  â”‚   Avatar   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  (ì¸ì¦)       â”‚  â”‚  (ì„œë¹„ìŠ¤)    â”‚  â”‚  (ê²°ì œ)     â”‚  â”‚  (ê°œì¸í™”)   â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼ REST API
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Java Backend (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§)                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                      Spring Boot Services                            â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚   User       â”‚  â”‚ Subscriptionâ”‚  â”‚  Payment    â”‚  â”‚  Avatar    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  Service     â”‚  â”‚  Service    â”‚  â”‚  Service    â”‚  â”‚  Service   â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚  â”‚
â”‚  â”‚  â”‚  Garment     â”‚  â”‚  TryOn       â”‚  â”‚  Usage       â”‚                   â”‚  â”‚
â”‚  â”‚  â”‚  Service     â”‚  â”‚  Service    â”‚  â”‚  Service    â”‚                   â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â”‚                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚  â”‚ PostgreSQL  â”‚  â”‚    Redis    â”‚  â”‚  Payment    â”‚                          â”‚
â”‚  â”‚   (DB)       â”‚  â”‚  (ìºì‹œ/í)   â”‚  â”‚  Gateway   â”‚                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                      â”‚
                                      â–¼ Internal API
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Python Backend (AI ì²˜ë¦¬)                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                         FastAPI Services                              â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚  â”‚
â”‚  â”‚  â”‚   Try-On     â”‚  â”‚  Image      â”‚  â”‚  AI Model    â”‚                  â”‚  â”‚
â”‚  â”‚  â”‚  Service     â”‚  â”‚  Processing â”‚  â”‚  Service    â”‚                  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â”‚                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                          â”‚
â”‚  â”‚   Celery     â”‚  â”‚    Redis    â”‚                                          â”‚
â”‚  â”‚  (ì‘ì—…í)     â”‚  â”‚  (ë©”ì‹œì§€)    â”‚                                          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ ì„œë¹„ìŠ¤ ê¸°ëŠ¥ ëª¨ë“ˆ

### 1. ì‚¬ìš©ì ê´€ë¦¬ ì„œë¹„ìŠ¤ (User Service)
**ë‹´ë‹¹**: Java Backend
- íšŒì›ê°€ì…/ë¡œê·¸ì¸
- í”„ë¡œí•„ ê´€ë¦¬
- ì¸ì¦/ì¸ê°€

### 2. êµ¬ë… ê´€ë¦¬ ì„œë¹„ìŠ¤ (Subscription Service)
**ë‹´ë‹¹**: Java Backend
- êµ¬ë… í”Œëœ ê´€ë¦¬ (Free, Basic, Pro, Unlimited)
- êµ¬ë… ìƒíƒœ ê´€ë¦¬
- ì‚¬ìš©ëŸ‰ ì¶”ì 

### 3. ê²°ì œ ì„œë¹„ìŠ¤ (Payment Service) â­ **ì‹ ê·œ ì¶”ê°€**
**ë‹´ë‹¹**: Java Backend
- ê²°ì œ ìš”ì²­ ì²˜ë¦¬
- ê²°ì œ ê²€ì¦
- ê²°ì œ ì´ë ¥ ê´€ë¦¬
- PGì‚¬ ì—°ë™ (í† ìŠ¤í˜ì´ë¨¼ì¸ , ì•„ì„í¬íŠ¸)

### 4. ì‚¬ìš©ëŸ‰ ê´€ë¦¬ ì„œë¹„ìŠ¤ (Usage Service)
**ë‹´ë‹¹**: Java Backend
- Try-On ì‚¬ìš©ëŸ‰ ì¶”ì 
- ì‚¬ìš©ëŸ‰ ì œí•œ ì²´í¬
- ì‚¬ìš©ëŸ‰ í†µê³„

### 5. ì˜ìƒ ê´€ë¦¬ ì„œë¹„ìŠ¤ (Garment Service)
**ë‹´ë‹¹**: Java Backend
- ì˜ìƒ ì—…ë¡œë“œ/ê´€ë¦¬
- ì˜ìƒ ë©”íƒ€ë°ì´í„° ê´€ë¦¬
- ì˜ìƒ ì¹´í…Œê³ ë¦¬ ê´€ë¦¬

### 6. Try-On ì„œë¹„ìŠ¤ (Try-On Service)
**ë‹´ë‹¹**: Java Backend (ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§) + Python Backend (AI ì²˜ë¦¬)
- Try-On ìš”ì²­ ì²˜ë¦¬
- ì‘ì—… í ê´€ë¦¬
- ê²°ê³¼ ì €ì¥/ì¡°íšŒ

### 7. ì•„ë°”íƒ€ ì„œë¹„ìŠ¤ (Avatar Service)
**ë‹´ë‹¹**: Java Backend (ê´€ë¦¬) + Python Backend (ìƒì„±)
- ì•„ë°”íƒ€ ìƒì„±
- ì²´í˜• íŒŒë¼ë¯¸í„° ê´€ë¦¬
- ì•„ë°”íƒ€ ë°ì´í„° ê´€ë¦¬

### 8. ì´ë¯¸ì§€ ì²˜ë¦¬ ì„œë¹„ìŠ¤ (Image Processing Service)
**ë‹´ë‹¹**: Python Backend
- ì´ë¯¸ì§€ ì—…ë¡œë“œ/ì €ì¥
- ì´ë¯¸ì§€ ì „ì²˜ë¦¬
- ì¸ë„¤ì¼ ìƒì„±

### 9. AI ëª¨ë¸ ì„œë¹„ìŠ¤ (AI Model Service)
**ë‹´ë‹¹**: Python Backend
- AI ëª¨ë¸ ë¡œë”©/ê´€ë¦¬
- AI íŒŒì´í”„ë¼ì¸ ì‹¤í–‰
- ê²°ê³¼ í›„ì²˜ë¦¬

---

## ğŸ’³ ê²°ì œ ì—°ë™ êµ¬ì¡°

### ê²°ì œ í”Œë¡œìš°

```
1. ì‚¬ìš©ì êµ¬ë… ì„ íƒ
   Frontend â”€â”€â–¶ Java Backend (Subscription Service)
                    â”‚
                    â–¼
2. ê²°ì œ ìš”ì²­ ìƒì„±
   Java Backend â”€â”€â–¶ Payment Service
                    â”‚
                    â–¼
3. PGì‚¬ ê²°ì œ ìš”ì²­
   Payment Service â”€â”€â–¶ Toss Payments / Iamport
                    â”‚
                    â–¼
4. ê²°ì œ ìŠ¹ì¸
   PGì‚¬ â”€â”€â–¶ Payment Service (Webhook)
                    â”‚
                    â–¼
5. êµ¬ë… í™œì„±í™”
   Payment Service â”€â”€â–¶ Subscription Service
                    â”‚
                    â–¼
6. ì‚¬ìš©ëŸ‰ ì œí•œ ì—…ë°ì´íŠ¸
   Subscription Service â”€â”€â–¶ Usage Service
```

### ê²°ì œ ì„œë¹„ìŠ¤ API

#### Java Backend
```
POST   /api/v1/payments/request        # ê²°ì œ ìš”ì²­ ìƒì„±
POST   /api/v1/payments/verify          # ê²°ì œ ê²€ì¦
GET    /api/v1/payments/history         # ê²°ì œ ì´ë ¥ ì¡°íšŒ
POST   /api/v1/payments/webhook         # PGì‚¬ ì›¹í›… ìˆ˜ì‹ 
```

#### ë°ì´í„° ëª¨ë¸
```java
// Payment Entity
@Entity
public class Payment {
    private UUID id;
    private UUID userId;
    private UUID subscriptionId;
    private String paymentMethod;      // card, bank_transfer, etc.
    private Long amount;               // ê²°ì œ ê¸ˆì•¡
    private String status;             // pending, completed, failed, cancelled
    private String pgTransactionId;    // PGì‚¬ ê±°ë˜ ID
    private String pgProvider;         // toss, iamport
    private LocalDateTime createdAt;
    private LocalDateTime completedAt;
}

// Subscription Entity (í™•ì¥)
@Entity
public class Subscription {
    private UUID id;
    private UUID userId;
    private String planType;           // free, basic, pro, unlimited
    private String status;             // active, expired, cancelled
    private Integer tryonLimit;        // ì›” Try-On ì œí•œ
    private Integer tryonUsed;         // ì‚¬ìš©ëŸ‰
    private LocalDateTime startedAt;
    private LocalDateTime expiresAt;
    private UUID paymentId;            // ê²°ì œ ID (FK)
}
```

---

## ğŸ“‚ ì„œë¹„ìŠ¤ë³„ í”„ë¡œì íŠ¸ êµ¬ì¡°

### Java Backend (ì„œë¹„ìŠ¤ ì¤‘ì‹¬ êµ¬ì¡°)
```
backend-java/
â”œâ”€â”€ src/main/java/com/virtualtryon/
â”‚   â”œâ”€â”€ VirtualTryOnApplication.java
â”‚   â”‚
â”‚   â”œâ”€â”€ controller/                    # API ì»¨íŠ¸ë¡¤ëŸ¬
â”‚   â”‚   â”œâ”€â”€ AuthController.java
â”‚   â”‚   â”œâ”€â”€ UserController.java
â”‚   â”‚   â”œâ”€â”€ SubscriptionController.java
â”‚   â”‚   â”œâ”€â”€ PaymentController.java      # â­ ê²°ì œ ì»¨íŠ¸ë¡¤ëŸ¬
â”‚   â”‚   â”œâ”€â”€ GarmentController.java
â”‚   â”‚   â”œâ”€â”€ TryOnController.java
â”‚   â”‚   â””â”€â”€ AvatarController.java
â”‚   â”‚
â”‚   â”œâ”€â”€ service/                       # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ AuthService.java
â”‚   â”‚   â”œâ”€â”€ UserService.java
â”‚   â”‚   â”œâ”€â”€ SubscriptionService.java
â”‚   â”‚   â”œâ”€â”€ PaymentService.java        # â­ ê²°ì œ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ UsageService.java
â”‚   â”‚   â”œâ”€â”€ GarmentService.java
â”‚   â”‚   â”œâ”€â”€ TryOnService.java
â”‚   â”‚   â””â”€â”€ AvatarService.java
â”‚   â”‚
â”‚   â”œâ”€â”€ repository/                    # ë°ì´í„° ì ‘ê·¼
â”‚   â”‚   â”œâ”€â”€ UserRepository.java
â”‚   â”‚   â”œâ”€â”€ SubscriptionRepository.java
â”‚   â”‚   â”œâ”€â”€ PaymentRepository.java     # â­ ê²°ì œ ë¦¬í¬ì§€í† ë¦¬
â”‚   â”‚   â”œâ”€â”€ GarmentRepository.java
â”‚   â”‚   â”œâ”€â”€ TryOnResultRepository.java
â”‚   â”‚   â””â”€â”€ AvatarRepository.java
â”‚   â”‚
â”‚   â”œâ”€â”€ entity/                        # JPA ì—”í‹°í‹°
â”‚   â”‚   â”œâ”€â”€ User.java
â”‚   â”‚   â”œâ”€â”€ Subscription.java
â”‚   â”‚   â”œâ”€â”€ Payment.java               # â­ ê²°ì œ ì—”í‹°í‹°
â”‚   â”‚   â”œâ”€â”€ Garment.java
â”‚   â”‚   â”œâ”€â”€ TryOnResult.java
â”‚   â”‚   â””â”€â”€ Avatar.java
â”‚   â”‚
â”‚   â”œâ”€â”€ dto/                           # ë°ì´í„° ì „ì†¡ ê°ì²´
â”‚   â”‚   â”œâ”€â”€ PaymentRequestDTO.java     # â­ ê²°ì œ ìš”ì²­ DTO
â”‚   â”‚   â”œâ”€â”€ PaymentResponseDTO.java    # â­ ê²°ì œ ì‘ë‹µ DTO
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚
â”‚   â”œâ”€â”€ config/                        # ì„¤ì •
â”‚   â”‚   â”œâ”€â”€ DatabaseConfig.java
â”‚   â”‚   â”œâ”€â”€ SecurityConfig.java
â”‚   â”‚   â”œâ”€â”€ PaymentConfig.java          # â­ ê²°ì œ ì„¤ì •
â”‚   â”‚   â””â”€â”€ WebConfig.java
â”‚   â”‚
â”‚   â””â”€â”€ external/                      # ì™¸ë¶€ API í´ë¼ì´ì–¸íŠ¸
â”‚       â”œâ”€â”€ PaymentGatewayClient.java   # â­ PGì‚¬ í´ë¼ì´ì–¸íŠ¸
â”‚       â””â”€â”€ PythonApiClient.java
```

### Python Backend (ì„œë¹„ìŠ¤ ì¤‘ì‹¬ êµ¬ì¡°)
```
backend-python/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ main.py
â”‚   â”‚
â”‚   â”œâ”€â”€ api/v1/                        # API ë¼ìš°í„°
â”‚   â”‚   â”œâ”€â”€ auth.py
â”‚   â”‚   â”œâ”€â”€ garments.py
â”‚   â”‚   â”œâ”€â”€ tryon.py
â”‚   â”‚   â””â”€â”€ avatars.py
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                      # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”‚   â”œâ”€â”€ tryon_service.py          # Try-On ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ image_service.py          # ì´ë¯¸ì§€ ì²˜ë¦¬ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ ai_service.py             # AI ëª¨ë¸ ì„œë¹„ìŠ¤
â”‚   â”‚   â””â”€â”€ storage_service.py        # ìŠ¤í† ë¦¬ì§€ ì„œë¹„ìŠ¤
â”‚   â”‚
â”‚   â”œâ”€â”€ models/                        # SQLAlchemy ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ user.py
â”‚   â”‚   â”œâ”€â”€ garment.py
â”‚   â”‚   â””â”€â”€ tryon_result.py
â”‚   â”‚
â”‚   â”œâ”€â”€ schemas/                       # Pydantic ìŠ¤í‚¤ë§ˆ
â”‚   â”‚   â”œâ”€â”€ tryon.py
â”‚   â”‚   â””â”€â”€ garment.py
â”‚   â”‚
â”‚   â”œâ”€â”€ tasks/                         # Celery ì‘ì—…
â”‚   â”‚   â”œâ”€â”€ celery_app.py
â”‚   â”‚   â””â”€â”€ ai_tasks.py
â”‚   â”‚
â”‚   â””â”€â”€ core/                          # í•µì‹¬ ì„¤ì •
â”‚       â”œâ”€â”€ config.py
â”‚       â”œâ”€â”€ database.py
â”‚       â””â”€â”€ security.py
```

### Frontend (ì„œë¹„ìŠ¤ ì¤‘ì‹¬ êµ¬ì¡°)
```
app/
â”œâ”€â”€ (auth)/                            # ì¸ì¦
â”‚   â”œâ”€â”€ login/
â”‚   â””â”€â”€ register/
â”‚
â”œâ”€â”€ (main)/                            # ë©”ì¸ ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ dashboard/
â”‚   â”œâ”€â”€ tryon/                         # Try-On ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ garments/                      # ì˜ìƒ ê´€ë¦¬
â”‚   â”œâ”€â”€ avatars/                       # ì•„ë°”íƒ€ ê´€ë¦¬
â”‚   â”œâ”€â”€ subscription/                  # êµ¬ë… ê´€ë¦¬
â”‚   â””â”€â”€ payment/                       # â­ ê²°ì œ í˜ì´ì§€
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/                            # ê¸°ë³¸ UI
â”‚   â”œâ”€â”€ features/
â”‚   â”‚   â”œâ”€â”€ tryon/                     # Try-On ê¸°ëŠ¥
â”‚   â”‚   â”œâ”€â”€ payment/                   # â­ ê²°ì œ ê¸°ëŠ¥
â”‚   â”‚   â”œâ”€â”€ subscription/               # êµ¬ë… ê¸°ëŠ¥
â”‚   â”‚   â””â”€â”€ avatar/                    # ì•„ë°”íƒ€ ê¸°ëŠ¥
â”‚   â””â”€â”€ layout/
â”‚
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ java-client.ts
â”‚   â”‚   â”œâ”€â”€ payment-client.ts          # â­ ê²°ì œ API í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â””â”€â”€ python-client.ts
â”‚   â””â”€â”€ utils/
â”‚
â””â”€â”€ stores/
    â”œâ”€â”€ auth-store.ts
    â”œâ”€â”€ subscription-store.ts
    â””â”€â”€ payment-store.ts               # â­ ê²°ì œ ìƒíƒœ ê´€ë¦¬
```

---

## ğŸ”„ ì„œë¹„ìŠ¤ ê°„ í†µì‹ 

### Java â†” Python
- **í†µì‹  ë°©ì‹**: HTTP REST API
- **ë°ì´í„° í˜•ì‹**: JSON
- **ì¸ì¦**: JWT Token

### Frontend â†” Backend
- **Java API**: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§, ì‚¬ìš©ì ê´€ë¦¬, ê²°ì œ
- **Python API**: AI ì²˜ë¦¬, ì´ë¯¸ì§€ ì²˜ë¦¬

---

## ğŸ“Š ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ (ê²°ì œ ì¶”ê°€)

### Payment í…Œì´ë¸”
```sql
CREATE TABLE payments (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    subscription_id UUID REFERENCES subscriptions(id),
    payment_method VARCHAR(50) NOT NULL,        -- card, bank_transfer
    amount BIGINT NOT NULL,                      -- ê²°ì œ ê¸ˆì•¡ (ì›)
    status VARCHAR(20) DEFAULT 'pending',         -- pending, completed, failed, cancelled
    pg_provider VARCHAR(20) NOT NULL,            -- toss, iamport
    pg_transaction_id VARCHAR(100),              -- PGì‚¬ ê±°ë˜ ID
    pg_response JSONB,                           -- PGì‚¬ ì‘ë‹µ ë°ì´í„°
    created_at TIMESTAMP DEFAULT NOW(),
    completed_at TIMESTAMP,
    cancelled_at TIMESTAMP
);

CREATE INDEX idx_payments_user_id ON payments(user_id);
CREATE INDEX idx_payments_status ON payments(status);
CREATE INDEX idx_payments_pg_transaction_id ON payments(pg_transaction_id);
```

### Subscription í…Œì´ë¸” (í™•ì¥)
```sql
ALTER TABLE subscriptions 
ADD COLUMN payment_id UUID REFERENCES payments(id),
ADD COLUMN auto_renew BOOLEAN DEFAULT false,
ADD COLUMN cancelled_at TIMESTAMP;
```

---

## ğŸ¯ ì„œë¹„ìŠ¤ ìš°ì„ ìˆœìœ„

### Phase 1: í•µì‹¬ ì„œë¹„ìŠ¤
1. âœ… ì‚¬ìš©ì ê´€ë¦¬ ì„œë¹„ìŠ¤
2. âœ… Try-On ì„œë¹„ìŠ¤
3. âœ… ì˜ìƒ ê´€ë¦¬ ì„œë¹„ìŠ¤

### Phase 2: ë¹„ì¦ˆë‹ˆìŠ¤ ì„œë¹„ìŠ¤
4. âœ… êµ¬ë… ê´€ë¦¬ ì„œë¹„ìŠ¤
5. âœ… **ê²°ì œ ì„œë¹„ìŠ¤** â­
6. âœ… ì‚¬ìš©ëŸ‰ ê´€ë¦¬ ì„œë¹„ìŠ¤

### Phase 3: ê°œì¸í™” ì„œë¹„ìŠ¤
7. âœ… ì•„ë°”íƒ€ ì„œë¹„ìŠ¤
8. âœ… ì´ë¯¸ì§€ ì²˜ë¦¬ ì„œë¹„ìŠ¤

---

*ì´ ë¬¸ì„œëŠ” ì„œë¹„ìŠ¤ ê¸°ëŠ¥ ì¤‘ì‹¬ ì•„í‚¤í…ì²˜ë¥¼ ì •ì˜í•©ë‹ˆë‹¤.*

